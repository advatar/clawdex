version: 1
commands:
  - name: cargo-test
    description: Run clawdex Rust tests
    cmd: cargo test --manifest-path clawdex/Cargo.toml
  - name: mac-build
    description: Build the macOS app without code signing
    cmd: xcodebuild -project macClawdex/Clawdex.xcodeproj -scheme Clawdex -configuration Debug -destination 'platform=macOS' build CODE_SIGNING_ALLOWED=NO CODE_SIGNING_REQUIRED=NO CODE_SIGN_IDENTITY=''
  - name: daemon-health
    description: Check local clawdexd daemon health endpoint
    cmd: curl -sS http://127.0.0.1:18791/v1/health
  - name: daemon-admin-overview
    description: Inspect daemon admin overview snapshot (counts + runtime paths)
    cmd: curl -sS http://127.0.0.1:18791/v1/admin/overview | jq '{counts,daemon}'
  - name: daemon-admin-plugins
    description: List plugins through daemon admin API
    cmd: curl -sS 'http://127.0.0.1:18791/v1/admin/plugins?includeDisabled=true' | jq '.plugins'
  - name: clawdex-cli
    description: Run the clawdex CLI from source
    cmd: cargo run --manifest-path clawdex/Cargo.toml -- <args>
  - name: tasks-follow
    description: Tail task-run events until the run reaches a terminal state
    cmd: cargo run --manifest-path clawdex/Cargo.toml -- tasks follow --run-id <run-id>
  - name: tasks-resume
    description: Resume an existing run thread and submit a new prompt turn
    cmd: cargo run --manifest-path clawdex/Cargo.toml -- tasks resume --run-id <run-id> --prompt '<text>'
  - name: tasks-fork
    description: Fork an existing run thread and submit a new prompt turn on the branch
    cmd: cargo run --manifest-path clawdex/Cargo.toml -- tasks fork --run-id <run-id> --prompt '<text>'
